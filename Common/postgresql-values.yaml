architecture: replication

global:
  postgresql:
    auth:
      existingSecret: postgresql
      database: postgres

metrics:
  enabled: true
  pgStatStatements: true

primary:
  extendedConfiguration: |
    max_connections = 3001
    shared_preload_libraries = 'pg_stat_statements'
    pg_stat_statements.track = all
    log_destination = 'stderr'
    logging_collector = off
    log_connections = off
    log_disconnections = off
    log_min_duration_statement = 1000
    log_statement = 'all'

  persistence:
    size: 2Gi
    storageClass: local-path

  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 500m
      memory: 1Gi

readReplicas:
  replicaCount: 1

  extendedConfiguration: |
    max_connections = 3001
    shared_preload_libraries = 'pg_stat_statements'
    pg_stat_statements.track = all
    log_destination = 'stderr'
    logging_collector = off
    log_connections = off
    log_disconnections = off
    log_min_duration_statement = 1000
    log_statement = 'all'

  persistence:
    size: 2Gi
    storageClass: local-path

  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 400m
      memory: 1Gi

replication:
  enabled: true
  numSynchronousReplicas: 1
  synchronousCommit: "on"

